{% extends 'base.html' %}
{% block content %}
{% load mathfilters %}
<div class = 'container'>
  <h1>{{user.username}}'s Manager</h1>
  <hr/>
  <div style = 'display:flex;'>
    <div class="col-md-2 ">
      <form action = "{% url 'detail' %}">
        <select name = 'filter'>
          <option value = 'Weekly'>Weekly</option>
          <option value = 'Monthly'>Monthly</option>
          <option value = 'Yearly'>Yearly</option>
        </select> <input type = 'submit' value = 'Filter' class = 'btn btn-primary'/>
      </form>
    </div>
    <br/>
  </div>
  <br/>
  <div class = 'container'>
    <h1>Budget{{bud.count|pluralize}}</h1>
    <div class='container d-inline-block'>
      <div class = 'row '>
        {% for bud in bud.all %}
        <div class = 'col-lg-4 col-md-6'>
          <div class="card card border-success mb-3">
            <div class="card-body">
              <h3 class="card-title">Budget-{{bud.dot|date:"F d"}}</h3>
              <hr/>
              <div class='col-12'>
                <p class="card-text"><h2>$ {{bud.budget}}</h2>
                </div>
                <div class='col-12'>
                  <h4 class = 'card-text'>Source: {{bud.source}}</h4>
                </div>
                <h5 class = 'card-text' style='font-size:15px;color:light;'><span class="oi oi-clock" style='padding:10px'></span> Last Updated : {{bud.dot_pretty}}</h5></p>
                <div class = 'd-inline-block'>
                  <a class = 'btn btn-primary' style = 'width:auto;' href ='{% url "budup" bud.id %}'>Update</a>
                  <a class = 'btn btn-danger' style = 'width:auto;' href ='{% url "buddel" bud.id %}'>Delete</a>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <a href ='{% url "budget" %}' class = 'btn btn-primary' style = 'color:white;text-decoration:none;' id = 'r'>Add Budget</a>
      <br/>
      <br/>
      <h1>Expense{{hey.count|pluralize}}</h1>
      {% for expense in hey.all %}
      <br/>
      <div class='container'>
        <div class="col-md-6 ">
          <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative card border-dark mb-3">
            <div class="col p-4 d-flex flex-column position-static bg-white " >
              <strong><h3 class="mb-0">{{expense.title}}</h3></strong>
              <div class="mb-1 text-muted"><span class="oi oi-clock" ></span> {{expense.dot_pretty}}<span/></div>
              <p class="card-text mb-auto" style = 'font-size:20px;'>Expense: $ {{expense.expense}}</p>
              <p class="card-text mb-auto" style = 'font-size:20px;'>Category: {{expense.category}}</p>
              <p class="card-text mb-auto" style = 'font-size:20px;'>Paid Through: {{expense.payment}}</p>
              {% if expense.receipt %}
              <p class="card-text mb-auto" style = 'font-size:20px;'><a href = "{{expense.receipt.url}}" id = 'signup'>View Receipt</a></p>
              {% endif %}
              <div class = 'inline-block'>
                <a class = 'btn btn-danger' style = 'width:47%;' href ='{% url "delexp" expense.id %}'>Delete</a>
                <a class = 'btn btn-primary' style = 'width:47%;' href ='{% url "update" expense.id %}'>Update</a>
              </div>
            </div>
            {% if expense.receipt %}
            <div class="col-auto d-none d-lg-block ">
              <img class="bd-placeholder-img" src = "{{expense.receipt.url}}" width="200" height="270"  aria-label="Placeholder: Thumbnail"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c">
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
        <div class='d-inline-block'>
          <a href ='{% url "expense" %} ' class = 'btn btn-primary' style = 'color:white;text-decoration:none;' >Add Expense</a>
          <a href ='{% url "analysis" %} ' class = 'btn btn-primary' style = 'color:white;text-decoration:none;'>View Analysis</a>
        </div>
      </div>
    </div>
    {% endblock %}
